@if (prediction) {
  <div class="relative w-full overflow-auto">
    <table class="w-full table-auto text-sm">
      <thead class="border-b">
        <tr class="">
          <th class="h-12 px-4 text-center align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Calendar Year</th>
          <th class="h-12 px-4 text-center align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Age</th>
          <th class="h-12 px-4 text-center align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Year Index</th>
          <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Prior Year</th>
          <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Amount At Start</th>
          <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Investment Return</th>
          <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0">Amount At End</th>
        </tr>
      </thead>
      <tbody>
        @for (year of prediction.years; track year.yearIndex) {
          <tr class="border-b hover:bg-muted/50" [ngClass]="{'bg-custom-green': prediction.targetAge === year.age}">
            <td class="p-4 text-center text-gray-600">{{ year.calendarYear }}</td>
            <td class="p-4 text-center text-gray-600">{{ year.age }}</td>
            <td class="p-4 text-center text-gray-600">{{ year.yearIndex }}</td>
            <td class="p-4 text-right text-gray-600">{{ formatCurrency(year.priorYear) }}</td>
            <td class="p-4 text-right text-gray-600">{{ formatCurrency(year.amountAtStart) }}</td>
            <td class="p-4 text-right text-gray-600">{{ formatCurrency(year.investmentReturn) }}</td>
            <td class="p-4 text-right text-gray-600">{{ formatCurrency(year.amountAtEnd) }}</td>
          </tr>
        }
      </tbody>
      <tfoot class="bg-primary font-medium text-primary-foreground"></tfoot>
    </table>
  </div>
}
